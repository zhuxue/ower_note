# 09-内置对象-5-常用其他对象

## 一 时间对象 Date

### 1.1 Date 基本使用

ECMAScript 的 Date 类型使用 UTC 世界标准时间，即 1970 年 1 月 1 日午夜（零时）开始经过的毫秒数来保存日期。

Date 的使用示例：

```js
// 创建当前时间对象
let nowDate = new Date()
console.log(nowDate) //  2020-03-27T05:06:42.294Z

// 创建其他时间对象：传入1970年1月1日午夜之后的毫秒数
let someDate = new Date(600000000) // 这显然是不很不好用的
// 可以直接传入可以转化为日期的数据: '2021-12-12','2019-05-23T00:00:00','May 25, 2004'
let someDate = new Date('May 25, 2004')
```

构造时间对象时，如果有参数，内部会调用 `Date.parse()` 方法将参数转化为毫秒数，若转化失败，则返回 NaN。

当然如果传入的参数是类似`2005, 4, 5, 17, 55, 55`，即本地时间 2005 年 5 月 5 日下午 5 点 55 分 55 秒，那么 Date 构造函数内部隐式调用的是 `Date.UTC()` 方法。

### 2.2 Date.now()

ES5 添加了 `Date.now()` 方法，返回表示调用这个方法时的日期和时间的毫秒数：

```js
// 起始时间
let start = Date.now();

//调用函数
doSomething();

//取得停止时间
let stop = Date.now()
let result = stop – start;
```

### 2.2 实例方法获取当前事件

Date 对象还有一些时间设置与获取方法：

```js
// 获取当前时间
let now = new Date()

console.log(now.getFullYear()) // 2020
console.log(now.getMonth()) // 2    其中0表示一月， 11表示十二月，类推
console.log(now.getDate()) // 27
console.log(now.getHours()) // 13

console.log(now.getTime()) // 时间戳
console.log(now.valueof()) // 时间戳

// 设置日期月份中的天数。如果传入的值超过了该月中应有的天数，则增加月份
now.setDate(33)
console.log(now.getMonth()) // 3
```

### 2.4 继承的静态方法

```js
// 创建当前时间对象
let nowDate = new Date()
console.log(nowDate) //  2020-03-27T05:06:42.294Z
console.log(nowDate.toLocaleString()) // 2020-3-27 13:10:31
console.log(nowDate.toLocaleDateString()) // 2020-3-27
console.log(nowDate.toLocaleTimeString()) // 13:10:31
```

## 二 Math

Math 对象包含了很多运算相关的方法。

min()/max()：用于比较参数大小，可以接收多个参数，返回一个最终值。不过在数组中要查找最大最小值，还要依靠 apply：

```js
let values = [1, 2, 3, 4, 5, 6, 7, 8]
let max = Math.max.apply(Math, values)
```

常用的舍入方法：

- Math.ceil()执行向上舍入，即它总是将数值向上舍入为最接近的整数；
- Math.floor()执行向下舍入，即它总是将数值向下舍入为最接近的整数；
- Math.round()执行标准舍入，即它总是将数值四舍五入为最接近的整数，也即常见的四舍五入

Math.random()方法返回大于等于 0 小于 1 的一个随机数，如选择一个 1-10 的数：

```js
Math.floor(Math.random() * 10 + 1) // 因为 rundom() 返回的是一个小数
```

## 三 Regx 正则表达式

### 3.1 创建正则表达式

正则表达式用于数据的匹配，创建方式有两种：

```js
// 方式一：字面量
let str = 'iruyuejun'
let flag = /u/.test(str) // 正则使用 // 包裹
console.log(flag) // true

// 方式二：对象方式
let reg = new RegExp('u', 'g')
console.log(reg.test(str)) // true
```

在 JavaScript 中，推荐使用字面量形式定义对象！字面量的缺陷是正则内部放置变量时候处理较为困难，如下所示：

```js
let str = 'iruyuejun'
let c = 'u'
console.log(eval('/' + c + '/').test(str))
```

除了 test() 方法外，match() 方法也可以用来验证时会否匹配：

```js
let str = 'iruyuejun'
let reg = /u/
console.log(str.match(reg)) // true
```

### 3.2 匹配模式标记

表示匹配模式的标记:

```txt
g：全局模式，表示查找字符串的全部内容，而不是找到第一个匹配的内容就结束。
i：不区分大小写，表示在查找匹配时忽略 pattern 和字符串的大小写。
m：多行模式，表示查找到一行文本末尾时会继续查找。
y：粘附模式，表示只查找从 lastIndex 开始及之后的字符串。
u： Unicode 模式，启用 Unicode 匹配。
s： dotAll 模式，表示元字符.匹配任何字符（包括\n 或\r）。
```

示例：

```js
// 匹配字符串中的所有"at"
let pattern1 = /at/g
// 匹配第一个"bat"或"cat"，忽略大小写
let pattern2 = /[bc]at/i
// 匹配所有以"at"结尾的三字符组合，忽略大小写
let pattern3 = /.at/gi
// 匹配所有".at"，忽略大小写，特殊字符需要转义，如：( [ { \ ^ $ | ) ] } ? * + .
let pattern4 = /\.at/gi

// 采用对象形式
pattern2 = new RegExp('[bc]at', 'i') // 也可以写为：new RegExp(pattern2)
```

## 四 Global

### 4.1 Global 对象概念

Global 对象无法通过代码显式访问，它所针对的是不属于任何对象的属性和方法。**所谓的全局变量、全局函数其实都是 Global 对象的成员！！！**

### 4.2 Global 对象方法

Global 对象的 URL 编码、解码方法：

```js
// url编码方法
let uri = 'http://www.wrox.com/illegal value.js#start'
// "http://www.wrox.com/illegal%20value.js#start"
console.log(encodeURI(uri))
// "http%3A%2F%2Fwww.wrox.com%2Fillegal%20value.js%23start"
console.log(encodeURIComponent(uri)) // 不会编码非法字符

// url解码方法
let uri = 'http%3A%2F%2Fwww.wrox.com%2Fillegal%20value.js%23start'
// http%3A%2F%2Fwww.wrox.com%2Fillegal value.js%23start
console.log(decodeURI(uri))
// http:// www.wrox.com/illegal value.js#start
console.log(decodeURIComponent(uri))
```

eval 方法：

```js
eval("console.log('hi')")
```

### 4.3 Global 对象属性

Global 对象的属性包括一些特殊值：undefined、 NaN 、Infinity。

Global 对象的属性也包括所有原生引用类型构造函数：Object、Function、Array、String、Blloean、Number、Date、Error、Symbol、TypeError 等。

在浏览器环境中，window 对象被实现为了 Global。
在 Node 环境中，拥有 Global 对象。
